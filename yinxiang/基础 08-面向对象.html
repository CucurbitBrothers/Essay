<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.4.0 (460661)"/><meta name="author" content="1404001663@qq.com"/><meta name="created" content="2018-08-06 08:13:51 +0000"/><meta name="source" content="desktop.win"/><meta name="source-application" content="yinxiang.win32"/><meta name="updated" content="2021-07-07 03:13:38 +0000"/><title>基础 08-面向对象</title></head><body><div><div><span style="font-size: 18px;"><b>问题</b></span></div><div/><ol><li><div><span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">实现with语句，要实现那个魔方方法</span></div></li><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">实现__enter__和__exit__方法后，就能通过with语句进行上下文管理</span></div></li></ul></ol><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;"><br/></span></font></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;"><br/></span></font></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">面向对象基础</span></font></div><ul><li><div><span style="font-size: 12pt;">类</span></div></li></ul><div>                00经典类（旧式类）：class Hero:                    class Hero():</div><div>                新式类：class Hero( object ):</div><div>                    区别：</div><div>                        新式类都从object继承，经典类不需要。</div><div>                        MRO(method resolution order 基类搜索顺序 / 多继承调用顺序)：</div><div>                            新式类：C3算法（广度优先搜索）</div><div>                            旧式类：深度优先搜索</div><div>                        新式类相同父类只执行一次构造函数，经典类重复执行多次。</div><div>                </div><div>                </div><div>                Python2中，经典类没有父类，新式类继承 object类</div><div>                Python3中，经典类和新式类都继承 object 类</div><div>                </div><div>            2. 面向对象</div><div>            （1）在python中方法名如果是__xxxx__()的，那么就有特殊的功能，因此叫做“魔法”方法 __str__（ 必须有返回值）</div><div>                返回一个字符串，作为这个对象的描述信息,追踪对象属性的变化</div><div>                在使用print 输出时，默认打印对象的内存地址，如果类里面定义了__str__(self)方法，就会打印从这个方法中return的数据</div><div>            （2）__del__()方法</div><div>                经常会在  __del__() 方法中做一些处理</div><div>                当有变量保存了一个对象的引用时，该对象的引用计数就会加  1</div><div>                使用 del 删除变量指向的对象时，就会减少对象的引用计数（每次减 1 ），当引用计数为0 时，对象才会真的被删除（内存被回收）</div><div>            3. 继承，封装</div><div>                i. 继承，子类会继承父类的__init__方法，所以子类会继承父类的属性</div><div>            1、调用父类方法</div><div>                    <span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: teal; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">super</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: olive; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">(</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 85, 170); font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">FooChild</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: gray; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 85, 170); font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">self</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: olive; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">)</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: gray; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 85, 170); font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">__init__</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: olive; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">(</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: olive; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">)</span></div><div><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: olive; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">          </span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: teal; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">super</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: olive; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">(</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 85, 170); font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">FooChild</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: gray; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">,</span> <span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 85, 170); font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">self</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: olive; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">)</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: gray; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 85, 170); font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">bar</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: olive; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">(</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 85, 170); font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">message</span><span style="border: 0px; font-size: 13.2px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: olive; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">)</span></div><div>                    super(child_class, child_object).parent_attribute(arg)</div><div><br/></div><div>                  使用super() 可以逐一调用所有的父类方法，并且只执行一次。调用顺序遵循 mro 类属性的顺序。</div><div>                    super() 带参数版本，只支持新式类</div><div>                    super(cls, self).make_cake()</div><div>                    </div><div>                    super()的简化版，只支持新式类</div><div>                    super().make_cake()</div><div>                    如果继承了多个父类，且父类都有同名方法，则默认只执行第一个父类的(同名方法只执行一次，目前super()不支持执行多个父类的同名方法)</div><div>                </div><div>                所以在以后的开发中，如果重写了父类的__init__方法，最好是先调用父类的这个方法，然后再添加自己的功能，（完成父类的初始化工作，以保证程序的稳定）</div><div>                </div><div>            3、封装的意义：</div><div>                （1）、将属性和方法放到一起作为一个整体，然后通过实例化对象来处理</div><div>                （2）、隐藏内部细节，只需要和对象的方法和属性进行交互</div><div>                （3）、可以对属性和方法增加权限</div><div>            2、私有权限：在属性名或方法名前面加两个下划线__</div><div>                不能通过对象处理，起到安全作用</div><div>                </div><div>                如果子类继承了父类，子类就是继承父类的共有属性和共有方法，子类不能直接使用父类的私有属性和私有方法</div><div>                </div><div>                子类可以调用父类的私有属性和私有方法，但是不合法。                               </div><div>                        dir() 函数不带参数时，返回当前范围内的变量、方法和定义的类型   列表；</div><div>                        带参数时，返回参数的属性、方法列表。</div><div>                        如果参数包含方法__dir__()，该方法将被调用。</div><div>                        如果参数不包含__dir__()，该方法将最大限度地收集参数信息。</div><div>                        </div><div>            4. 多态 （定义时的类型和运行时的类型不一样，此时就称为多态）</div><div>                i. Python的多态，就是弱化类型（鸭子类型），重点在于对象参数是否有指定的属性和方法，如果有就认定合适，而不关心对象的类型是否正确。</div><div>                    传入不同的对象，（类型不同）</div><div>                    都有相同的属性和方法，可以正常访问，称为多态</div><div>                    多态的作用：增强一个函数或者方法的复用性</div><div>                ii. 类属性和实例属性</div><div>                类属性：就是类对象所拥有的属性，被所有类对象的实例对象所共有，在内存中值存在一个副本，类似于C++中的静态对象</div><div>                实例属性：对象属性，无法通过     类名.属性名     进行访问</div><div>                    如果一个类有多个对象，每个对象的属性是各自保存的，都有各自独立的地址</div><div>                    </div><div>                如果需要在类外修改类属性，必须通过类对象去引用然后进行修改。如果通过实例对象去引用，会产生一个同名的实例属性，这种方式修改的是实例属性，不会影响到类属性，并且之后如果通过实例对象去引用该名称的属性，实例属性会强制屏蔽掉类属性，即引用的是实例属性，除非删除了该实例属性</div><div>                iii. 类方法和静态方法</div><div>                类方法：修饰器@classmethod来标识其为类方法，（一般以cls作为第一个参数）</div><div>                静态方法：通过修饰器@staticmethod来进行修饰，静态方法不需要多定义参数，可以通过对象和类来访问</div><div>                iv. 类方法、实例方法、静态方法的区别</div><div>                类方法使用classmethod标识，静态方法使用@staticmethod 来修饰。实例方法就是剩下的方法</div><div>                都可以通过类名或对象名进行调用，不过实例方法通过类名进行调用时需要传入一个对象参数。</div><div>            5. __new__方法</div><div>                __new__至少要有一个参数cls，代表要实例化的类</div><div>                __new__必须要有返回值，返回实例化出来的实例。可以return父类__new__出来的实例，或者直接是object的__new__出来的实例</div><div>                    return  object.__new__(cls)</div><div>            6. 单例模式</div><div>            确保某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例，这个类称为单例类，单例模式是一种对象创建型模式。</div><div>                保证只有1个对象</div><div>                只执行一次__init__方法</div><div>                    class Singleton(object):</div><div>                        __instance = None</div><div>                        __is_first = True</div><div>                        def __new__(cls, age, name):  # 实例化</div><div>                            if not cls.__instance:</div><div>                                cls.__instance = object.__new__(cls)</div><div>                            return cls.__instance</div><div>                        def __init__(self, age, name):  # 初始化</div><div>                            if self. __is_first:</div><div>                                self.age = age</div><div>                                self.name = name</div><div>                                Singleton. __is_first = False</div><div>                </div><div>            7. 概念知识：</div><div>                i. 面向对象（object oriented programing  OOP）：</div><div>                    博大，将一类事物的共同属性进行抽象，将其所有的属性、行为按功能进行集合；</div><div>                    把事物分解成不同的对象，建立对象的目的不是完成某一个步骤，而是为了描述某个事物在整个解决问题的步骤中的行为</div><div>                    可以加快开发速度，减少代码重复</div><div>                面向过程（ procedure oriented programing  POP）：</div><div>                    精深，思考到事物发展的每一步，细发如丝，考虑到任何一种可能发生的情况，一步步执行，判断，直至事物的结束。</div><div>                    根据业务逻辑用函数把这些步骤一步步实现，然后在一一调用（自顶向下，逐步细化）</div><div>                    随着系统的膨胀，面向过程将无法应付，最终崩溃</div><div>                优缺点：</div><div>                    面型对象： 易维护、复用、扩展，系统使用灵活方便；</div><div>                            性能低于面向过程</div><div>                    面向过程：性能更优，消耗资源少</div><div>                            难以维护、复用、扩展。</div><div>                ii.</div><div>                    1) 类：具有相似内部状态和运动规律的实体集合（或抽象）</div><div>                    2) 对象：某一个类的具体存在</div><div>                </div><div> </div></div><div><br/></div></body></html>